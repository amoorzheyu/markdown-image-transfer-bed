# ğŸ–¼ï¸ å›¾åºŠç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°çš„å›¾åºŠç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå›¾ç‰‡ä¸Šä¼ ã€ç®¡ç†ã€é¢„è§ˆå’Œåˆ é™¤åŠŸèƒ½ï¼Œå¸¦æœ‰å®‰å…¨çš„ç™»å½•è®¤è¯ç³»ç»Ÿã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å®‰å…¨ç™»å½•** - åŸºäºç¯å¢ƒå˜é‡çš„è´¦å·å¯†ç è®¤è¯
- ğŸ“¤ **å›¾ç‰‡ä¸Šä¼ ** - æ”¯æŒå•å¼ /æ‰¹é‡ä¸Šä¼ ï¼Œæ‹–æ‹½ä¸Šä¼ 
- ğŸ–¼ï¸ **å›¾ç‰‡ç®¡ç†** - æŸ¥çœ‹ã€é¢„è§ˆã€åˆ é™¤å›¾ç‰‡
- ğŸ“‹ **å¿«é€Ÿå¤åˆ¶** - ä¸€é”®å¤åˆ¶å›¾ç‰‡é“¾æ¥
- ğŸ—‘ï¸ **æ‰¹é‡æ“ä½œ** - æ‰¹é‡é€‰æ‹©å’Œåˆ é™¤å›¾ç‰‡
- ğŸ” **æœç´¢è¿‡æ»¤** - æŒ‰æ–‡ä»¶åæœç´¢å›¾ç‰‡
- ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯** - æ˜¾ç¤ºå›¾ç‰‡æ•°é‡å’Œå­˜å‚¨ç©ºé—´
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ğŸ¨ **ç°ä»£UI** - ç¾è§‚çš„ç•Œé¢è®¾è®¡ï¼Œè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
- ğŸ—ï¸ **æ¸…æ™°æ¶æ„** - åˆ†å±‚è®¾è®¡ï¼Œä»£ç ç»„ç»‡è‰¯å¥½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` æ–‡ä»¶ä¸º `.env` å¹¶ä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# æœåŠ¡å™¨ç«¯å£
PORT=3000

# åŸºç¡€URLï¼ˆç”¨äºç”Ÿæˆå›¾ç‰‡é“¾æ¥ï¼‰
BASE_URL=http://localhost:3000

# ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…éœ€ï¼‰
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your-secure-password

# Session å¯†é’¥ï¼ˆå¿…éœ€ï¼Œè¯·ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²ï¼‰
SESSION_SECRET=your-random-secret-key-here

# API Keyï¼ˆå¯é€‰ï¼‰
API_KEY=your-api-key-here
```

### 3. å¯åŠ¨æœåŠ¡

å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰ï¼š
```bash
npm run dev
```

ç”Ÿäº§æ¨¡å¼ï¼š
```bash
npm start
```

### 4. è®¿é—®ç®¡ç†ç•Œé¢

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š`http://localhost:3000`

ä½¿ç”¨é…ç½®çš„ç®¡ç†å‘˜è´¦å·å¯†ç ç™»å½•ã€‚

## ğŸ³ Docker éƒ¨ç½²

### æ„å»ºé•œåƒ

```bash
docker build -t image-host .
```

### è¿è¡Œå®¹å™¨

```bash
docker run -d \
  -p 3000:3000 \
  -v $(pwd)/images:/usr/src/app/images \
  -e ADMIN_USERNAME=admin \
  -e ADMIN_PASSWORD=your-password \
  -e SESSION_SECRET=your-secret-key \
  --name image-host \
  image-host
```

## ğŸ“– API æ–‡æ¡£

### ç®¡ç†ç•Œé¢ API

æ‰€æœ‰ç®¡ç† API éœ€è¦å…ˆç™»å½•è®¤è¯ã€‚

#### ç™»å½•

```http
POST /api/login
Content-Type: application/json

{
  "username": "admin",
  "password": "your-password"
}
```

#### é€€å‡ºç™»å½•

```http
POST /api/logout
```

#### æ£€æŸ¥è®¤è¯çŠ¶æ€

```http
GET /api/check-auth
```

#### è·å–å›¾ç‰‡åˆ—è¡¨

```http
GET /api/images
```

#### è·å–ç»Ÿè®¡ä¿¡æ¯

```http
GET /api/stats
```

#### ä¸Šä¼ å›¾ç‰‡

```http
POST /api/upload
Content-Type: multipart/form-data

files: [å›¾ç‰‡æ–‡ä»¶]
```

#### åˆ é™¤å›¾ç‰‡

```http
DELETE /api/images/:filename
```

#### æ‰¹é‡åˆ é™¤

```http
POST /api/images/batch-delete
Content-Type: application/json

{
  "filenames": ["file1.png", "file2.jpg"]
}
```

### å¤–éƒ¨ä¸Šä¼  API

ç”¨äºå¤–éƒ¨è°ƒç”¨ï¼ˆå¦‚ Markdown ç¼–è¾‘å™¨æ’ä»¶ï¼‰ã€‚

```http
POST /upload
Content-Type: application/octet-stream
X-API-Key: your-api-key (å¦‚æœè®¾ç½®äº† API_KEY)

[äºŒè¿›åˆ¶æ–‡ä»¶æ•°æ®]
```

å“åº”ï¼š

```json
{
  "success": true,
  "url": "http://localhost:3000/images/xxxxx.png",
  "filename": "xxxxx.png",
  "localPath": "images/xxxxx.png"
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/                    # åç«¯æºä»£ç 
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ env.js          # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â”‚   â””â”€â”€ constants.js    # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ middlewares/        # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js         # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ upload.js       # æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ errorHandler.js # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ requestLogger.js # è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ authController.js   # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ imageController.js  # å›¾ç‰‡ç®¡ç†æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ uploadController.js # ä¸Šä¼ æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ authService.js      # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ imageService.js     # å›¾ç‰‡ç®¡ç†æœåŠ¡
â”‚   â”‚   â””â”€â”€ uploadService.js    # ä¸Šä¼ æœåŠ¡
â”‚   â”œâ”€â”€ routes/             # è·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ authRoutes.js       # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ imageRoutes.js      # å›¾ç‰‡è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ uploadRoutes.js     # ä¸Šä¼ è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ statsRoutes.js      # ç»Ÿè®¡è·¯ç”±
â”‚   â”‚   â””â”€â”€ index.js            # è·¯ç”±æ±‡æ€»
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ fileHelper.js       # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ formatter.js        # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ response.js         # å“åº”å·¥å…·
â”‚   â”‚   â””â”€â”€ logger.js           # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ app.js              # Express åº”ç”¨é…ç½®
â”œâ”€â”€ public/                 # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css       # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ app.js          # å‰ç«¯é€»è¾‘
â”‚   â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”‚   â””â”€â”€ favicon.ico         # ç½‘ç«™å›¾æ ‡
â”œâ”€â”€ images/                 # å›¾ç‰‡å­˜å‚¨ç›®å½•
â”œâ”€â”€ server.js               # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ Dockerfile              # Docker é…ç½®
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## ğŸ—ï¸ æ¶æ„è¯´æ˜

æœ¬é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå„å±‚èŒè´£æ¸…æ™°ï¼š

### åç«¯æ¶æ„

- **é…ç½®å±‚ (config)**: ç®¡ç†ç¯å¢ƒå˜é‡å’Œå¸¸é‡é…ç½®
- **å·¥å…·å±‚ (utils)**: æä¾›é€šç”¨å·¥å…·å‡½æ•°
- **ä¸­é—´ä»¶å±‚ (middlewares)**: å¤„ç†è¯·æ±‚æ‹¦æˆªã€è®¤è¯ã€æ—¥å¿—ç­‰
- **æœåŠ¡å±‚ (services)**: å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- **æ§åˆ¶å™¨å±‚ (controllers)**: å¤„ç† HTTP è¯·æ±‚å’Œå“åº”
- **è·¯ç”±å±‚ (routes)**: å®šä¹‰ API è·¯ç”±

### å‰ç«¯æ¶æ„

- **HTML**: è¯­ä¹‰åŒ–çš„é¡µé¢ç»“æ„
- **CSS**: æ¨¡å—åŒ–çš„æ ·å¼è®¾è®¡
- **JavaScript**: æ¸…æ™°çš„å‰ç«¯é€»è¾‘

### æ•°æ®æµ

```
å®¢æˆ·ç«¯è¯·æ±‚ 
  â†“
è·¯ç”±å±‚ (routes)
  â†“
ä¸­é—´ä»¶ (middlewares)
  â†“
æ§åˆ¶å™¨ (controllers)
  â†“
æœåŠ¡å±‚ (services)
  â†“
å·¥å…·å±‚ (utils)
  â†“
è¿”å›å“åº”
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç ** - ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹é»˜è®¤çš„ç®¡ç†å‘˜å¯†ç 
2. **è®¾ç½®å¼ºå¯†ç ** - ä½¿ç”¨å¼ºå¯†ç ä¿æŠ¤ç®¡ç†ç•Œé¢
3. **ä¿®æ”¹ Session å¯†é’¥** - ä½¿ç”¨éšæœºç”Ÿæˆçš„ SESSION_SECRET
4. **å¯ç”¨ HTTPS** - ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ HTTPS åè®®
5. **é™åˆ¶è®¿é—®** - å»ºè®®é…ç½®é˜²ç«å¢™æˆ–åå‘ä»£ç†é™åˆ¶è®¿é—®
6. **è®¾ç½® API Key** - ä¸ºå¤–éƒ¨ä¸Šä¼ æ¥å£è®¾ç½® API Key

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js** - JavaScript è¿è¡Œæ—¶
- **Express** - Web æ¡†æ¶
- **express-session** - ä¼šè¯ç®¡ç†
- **cookie-parser** - Cookie è§£æ
- **Multer** - æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **dotenv** - ç¯å¢ƒå˜é‡ç®¡ç†

### å‰ç«¯
- **åŸç”Ÿ HTML/CSS/JavaScript** - æ— æ¡†æ¶ä¾èµ–
- **ç°ä»£ CSS** - æ¸å˜ã€åŠ¨ç”»ã€å“åº”å¼å¸ƒå±€

### å¼€å‘å·¥å…·
- **nodemon** - å¼€å‘æ—¶è‡ªåŠ¨é‡å¯

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `services` å±‚å®ç°ä¸šåŠ¡é€»è¾‘
2. åœ¨ `controllers` å±‚å¤„ç† HTTP è¯·æ±‚
3. åœ¨ `routes` å±‚å®šä¹‰è·¯ç”±
4. å¦‚éœ€ä¸­é—´ä»¶ï¼Œåœ¨ `middlewares` å±‚æ·»åŠ 
5. æ›´æ–°å‰ç«¯ä»£ç ä»¥ä½¿ç”¨æ–°åŠŸèƒ½

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ES6+ æ¨¡å—è¯­æ³•
- éµå¾ªå•ä¸€èŒè´£åŸåˆ™
- ä¿æŒå‡½æ•°ç®€æ´ï¼Œå•ä¸ªå‡½æ•°ä¸è¶…è¿‡ 50 è¡Œ
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ™‹ é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issueã€‚
